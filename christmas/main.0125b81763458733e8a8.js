(()=>{"use strict";var e={377:(e,t,s)=>{e.exports=s.p+"ca702ce66d387e612f6d.svg"},195:(e,t,s)=>{e.exports=s.p+"34d5c2d6ef9d1d77b576.svg"},769:(e,t,s)=>{e.exports=s.p+"f3387537af443030ea20.json"}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e;!function(e){e.ASC="ВВЕРХ",e.DSC="ВНИЗ"}(e||(e={}));var t,i,r,a=s(769),n=function(e,t,s,i){return new(s||(s=Promise))((function(r,a){function n(e){try{o(i.next(e))}catch(e){a(e)}}function l(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,l)}o((i=i.apply(e,t||[])).next())}))};class l{build(){return n(this,void 0,void 0,(function*(){return yield this.load(a)}))}load(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(e);return(yield t.json()).map((e=>({num:Number(e.num),name:e.name,count:Number(e.count),year:Number(e.year),shape:e.shape,color:e.color,size:e.size,favorite:e.favorite})))}))}}class o{constructor({num:e,name:t,count:s,year:i,shape:r,color:a,size:n,favorite:l,selected:o=!1}){this.num=e,this.name=t,this.count=s,this.year=i,this.shape=r,this.color=a,this.size=n,this.favorite=l,this.selected=o}generateCard(){let e="";const t=document.createElement("div");t.className="card",this.selected&&(t.className="card active");const s=this.favorite?"да":"нет";return e+=`<h2 class="card__title">${this.name}</h2>\n           <img class="card__image" src="./assets/img/${this.num}.png" alt="${this.name}">\n           <div class="card__description">\n            <p>Количество: <span>${this.count}</span></p>\n            <p>Год покупки: <span>${this.year}</span> год</p>\n            <p>Форма игрушки: <span>${this.shape}</span></p>\n            <p>Цвет игрушки: <span>${this.color}</span></p>\n            <p>Размер игрушки: <span>${this.size}</span></p>\n            <p>Любимая: <span>${s}</span></p>\n           </div>\n           <div class="ribbon"></div>\n          `,t.innerHTML=e,t}selectCard(){this.selected=!0}}!function(e){e.white="#fff",e.main="#278D9F"}(t||(t={})),function(e){e[e.percent=100]="percent"}(i||(i={})),function(e){e.noMatch="Извините, совпадений не обнаружено"}(r||(r={}));class h{constructor(){this.sliders=document.querySelectorAll(".range__input"),this.displayValueOne=document.querySelector("#range1"),this.displayValueTwo=document.querySelector("#range2"),this.displayValueThree=document.querySelector("#range3"),this.displayValueFour=document.querySelector("#range4"),this.sliderTracks=document.querySelectorAll(".range__input"),this.sliderOneMaxValue=this.sliderTracks[0].max,this.sliderOneMinValue=this.sliderTracks[0].min,this.sliderTwoMaxValue=this.sliderTracks[2].max,this.sliderTwoMinValue=this.sliderTracks[2].min}setRangeSliders(e){this.sliders=e,this.colorSlider(this.sliders),this.sliders[0].addEventListener("input",(()=>{parseInt(this.sliders[1].value)-parseInt(this.sliders[0].value)<=0&&(this.sliders[0].value=`${parseInt(this.sliders[1].value)}`),this.colorSlider(this.sliders)})),this.sliders[1].addEventListener("input",(()=>{parseInt(this.sliders[1].value)-parseInt(this.sliders[0].value)<=0&&(this.sliders[1].value=`${parseInt(this.sliders[0].value)}`),this.colorSlider(this.sliders)})),this.sliders[2].addEventListener("input",(()=>{parseInt(this.sliders[3].value)-parseInt(this.sliders[2].value)<=0&&(this.sliders[2].value=`${parseInt(this.sliders[3].value)}`),this.colorSlider(this.sliders)})),this.sliders[3].addEventListener("input",(()=>{parseInt(this.sliders[3].value)-parseInt(this.sliders[2].value)<=0&&(this.sliders[3].value=`${parseInt(this.sliders[2].value)}`),this.colorSlider(this.sliders)}))}colorSlider(e){this.displayValueOne.textContent=e[0].value,this.displayValueTwo.textContent=e[1].value,this.displayValueThree.textContent=e[2].value,this.displayValueFour.textContent=e[3].value;const s=(parseInt(e[0].value)-parseInt(this.sliderOneMinValue))/(parseInt(this.sliderOneMaxValue)-parseInt(this.sliderOneMinValue))*i.percent,r=(parseInt(e[1].value)-parseInt(this.sliderOneMinValue))/(parseInt(this.sliderOneMaxValue)-parseInt(this.sliderOneMinValue))*i.percent,a=(parseInt(e[2].value)-parseInt(this.sliderTwoMinValue))/(parseInt(this.sliderTwoMaxValue)-parseInt(this.sliderTwoMinValue))*i.percent,n=(parseInt(e[3].value)-parseInt(this.sliderTwoMinValue))/(parseInt(this.sliderTwoMaxValue)-parseInt(this.sliderTwoMinValue))*i.percent;this.sliderTracks[0].style.background=`linear-gradient(to right, ${t.white} ${s}% , ${t.main} ${s}% , ${t.main} ${r}%, ${t.white} ${r}%)`,this.sliderTracks[2].style.background=`linear-gradient(to right, ${t.white} ${a}% , ${t.main} ${a}% , ${t.main} ${n}%, ${t.white} ${n}%)`}}class c{constructor(e,t){this.cardsToShowArray=[],this.filters=e,this.sortConditions=t}parseData(e){return this.filterData(e),this.sortData(this.cardsToShowArray),this.cardsToShowArray}filterData(e){this.cardsToShowArray=[],e.map((e=>{let t=!0;this.filters.name&&t&&(e.name.toLowerCase().includes(this.filters.name)||(t=!1)),Object.prototype.hasOwnProperty.call(this.filters,"favorite")&&t&&this.filters.favorite!==e.favorite&&(t=!1),this.filters.size&&t&&(t=this.filters.size.some((t=>t===e.size))),this.filters.color&&t&&(t=this.filters.color.some((t=>t===e.color))),this.filters.shape&&t&&(t=this.filters.shape.some((t=>t===e.shape))),this.filters.count&&t&&(this.filters.count.from>e.count||this.filters.count.to<e.count)&&(t=!1),this.filters.year&&t&&(this.filters.year.from>e.year||this.filters.year.to<e.year)&&(t=!1),t&&this.cardsToShowArray.push(e)}))}sortData(t){this.sortConditions.direction===e.ASC?t.sort(((e,t)=>e[this.sortConditions.key]>t[this.sortConditions.key]?1:-1)):t.sort(((e,t)=>e[this.sortConditions.key]>t[this.sortConditions.key]?-1:1))}}const d=s(195),u=s(377),f=new class{constructor(){this.allCardsArray=[],this.cardsOnPageArray=[],this.selectedCards=[],this.filteredCards=[],this.rangeSortedArray=[],this.favoriteValue=!1,this.allCardsArray=[],this.cardsOnPageArray=[],this.selectedCards=[],this.filteredCards=[],this.rangeSortedArray=[],this.favoriteValue=!1,this.sizeArray=[],this.colorArray=[],this.shapeArray=[],this.filters={},this.sortConditions={key:"name",direction:e.ASC},this.selectBtn=document.querySelector(".select"),this.selectedBtn=document.querySelector(".favorite-number"),this.favoriteBtn=document.querySelector(".filter_favorite"),this.sizeBtns=document.querySelectorAll(".filter_size"),this.colorBtns=document.querySelectorAll(".filter_color"),this.shapeBtns=document.querySelectorAll(".filter_shape"),this.searchBtn=document.querySelector(".search"),this.resetBtn=document.querySelector(".reset"),this.resetLocalStorageBtn=document.querySelector(".reset_local-storage"),this.sliders=document.querySelectorAll(".range__input")}getCardsList(){const t=new l,s=new h;this.filters=JSON.parse(localStorage.getItem("filters")||"{}"),this.sortConditions=JSON.parse(localStorage.getItem("sortConditions")||"{}"),this.selectedCards=JSON.parse(localStorage.getItem("selectedCards")||"[]"),this.setButtons(),this.setSelected(),t.build().then((t=>{t.forEach((e=>{this.allCardsArray.push(e)})),this.allCardsArray.sort(((e,t)=>e.name>t.name?1:-1)),this.filterCards(),this.searchBtn.addEventListener("change",(()=>{this.searchBtn.value?(this.filters.name=this.searchBtn.value.toLowerCase(),this.searchBtn.style.backgroundImage=`url(${u})`):this.filters.name&&!this.searchBtn.value&&(delete this.filters.name,this.searchBtn.style.backgroundImage=`url(${d})`),this.filterCards()})),this.searchBtn.addEventListener("click",(()=>{this.searchBtn.value&&(delete this.filters.name,this.searchBtn.style.backgroundImage=`url(${d})`,this.searchBtn.value=""),this.filterCards()})),this.selectBtn.addEventListener("change",(()=>{this.sortConditions.key=this.selectBtn.value.split("-")[0],"DSC"===this.selectBtn.value.split("-")[1].toUpperCase()?this.sortConditions.direction=e.DSC:this.sortConditions.direction=e.ASC,this.setLocalStorage(),this.filterCards()})),this.favoriteBtn.addEventListener("click",(()=>{this.favoriteBtn.checked?this.filters.favorite=!0:delete this.filters.favorite,this.setLocalStorage(),this.filterCards()})),this.sizeBtns.forEach((e=>{e.addEventListener("click",(()=>{this.sizeArray=[],this.sizeBtns.forEach((e=>{e.checked&&this.sizeArray.push(e.dataset.filter)})),this.sizeArray.length>0?this.filters.size=this.sizeArray:delete this.filters.size,this.setLocalStorage(),this.filterCards()}))})),this.colorBtns.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("active"),this.colorArray=[],this.colorBtns.forEach((e=>{e.className.includes("active")&&this.colorArray.push(e.dataset.filter)})),this.colorArray.length>0?this.filters.color=this.colorArray:delete this.filters.color,this.setLocalStorage(),this.filterCards()}))})),this.shapeBtns.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("active"),this.shapeArray=[],this.shapeBtns.forEach((e=>{e.className.includes("active")&&this.shapeArray.push(e.dataset.filter)})),this.shapeArray.length>0?this.filters.shape=this.shapeArray:delete this.filters.shape,this.setLocalStorage(),this.filterCards()}))})),s.setRangeSliders(this.sliders),this.sliders.forEach((e=>{e.addEventListener("change",(e=>{e.target!==this.sliders[0]&&e.target!==this.sliders[1]||(this.filters.count={from:Number(this.sliders[0].value),to:Number(this.sliders[1].value)}),e.target!==this.sliders[2]&&e.target!==this.sliders[3]||(this.filters.year={from:Number(this.sliders[2].value),to:Number(this.sliders[3].value)}),this.setLocalStorage(),this.filterCards()}))})),this.resetBtn.addEventListener("click",(()=>{this.filters={},this.setLocalStorage(),this.favoriteBtn.checked=!1,this.sizeBtns.forEach((e=>{e.checked=!1})),this.colorBtns.forEach((e=>{e.classList.remove("active")})),this.shapeBtns.forEach((e=>{e.classList.remove("active")}));const e=new h;this.sliders[0].value="0",this.sliders[1].value="12",this.sliders[2].value="1940",this.sliders[3].value="2021",e.setRangeSliders(this.sliders),this.filterCards()})),this.resetLocalStorageBtn.addEventListener("click",(()=>{localStorage.removeItem("filters"),localStorage.removeItem("sortConditions"),localStorage.removeItem("selectedCards")}))}))}renderCards(e){const t=document.querySelector(".cards-inner-container");if(t.innerHTML="",0===e.length){const e=document.createElement("div");e.innerHTML=r.noMatch,e.className="no-cards",t.append(e)}e.forEach((e=>{const s=new o(e),i=s.generateCard();t.append(i),i.addEventListener("click",(()=>{this.selectCards(s,i)}))}))}filterCards(){const e=new c(this.filters,this.sortConditions);this.cardsOnPageArray=e.parseData(this.allCardsArray),this.checkIfSelected(),this.renderCards(this.cardsOnPageArray)}selectCards(e,t){if(this.selectedCards.length<20&&!this.selectedCards.includes(e))this.selectedCards.push(e),this.setLocalStorage(),t.classList.add("active"),this.selectedBtn.innerHTML=`${this.selectedCards.length}`;else if(this.selectedCards.includes(e)){const s=this.selectedCards.indexOf(e);this.selectedCards.splice(s,1),this.setLocalStorage(),t.classList.remove("active"),this.selectedBtn.innerHTML=`${this.selectedCards.length}`}else{const e=document.createElement("p");e.className="favorite-number_limit",e.innerHTML="Извините, все слоты заполнены",this.selectedBtn.append(e)}}checkIfSelected(){const e=this.selectedCards.map((e=>e.num));this.cardsOnPageArray=this.cardsOnPageArray.map((t=>e.includes(t.num)?Object.assign(Object.assign({},t),{selected:!0}):t))}setLocalStorage(){localStorage.setItem("filters",JSON.stringify(this.filters)),localStorage.setItem("sortConditions",JSON.stringify(this.sortConditions)),localStorage.setItem("selectedCards",JSON.stringify(this.selectedCards))}setButtons(){this.sortConditions&&"name"===this.sortConditions.key&&this.sortConditions.direction===e.ASC&&(this.selectBtn.value="name-acs"),this.sortConditions&&"name"===this.sortConditions.key&&this.sortConditions.direction===e.DSC&&(this.selectBtn.value="name-dsc"),this.sortConditions&&"year"===this.sortConditions.key&&this.sortConditions.direction===e.ASC&&(this.selectBtn.value="year-acs"),this.sortConditions&&"year"===this.sortConditions.key&&this.sortConditions.direction===e.DSC&&(this.selectBtn.value="year-dsc"),!0===this.filters.favorite&&(this.favoriteBtn.checked=!0),this.sizeBtns.forEach((e=>{this.filters.size&&this.filters.size.includes(e.dataset.filter)&&(e.checked=!0)})),this.colorBtns.forEach((e=>{this.filters.color&&this.filters.color.includes(e.dataset.filter)&&e.classList.add("active")})),this.shapeBtns.forEach((e=>{this.filters.shape&&this.filters.shape.includes(e.dataset.filter)&&e.classList.add("active")}));const t=new h;this.filters.count&&(this.sliders[0].value=this.filters.count.from.toString(),this.sliders[1].value=this.filters.count.to.toString()),this.filters.year&&(this.sliders[2].value=this.filters.year.from.toString(),this.sliders[3].value=this.filters.year.to.toString()),t.setRangeSliders(this.sliders)}setSelected(){this.selectedBtn.innerHTML=`${this.selectedCards.length}`}};f.getCardsList(),console.log("Самооценка: 200 из 200\n\n  1. +10 Вёрстка\n  2. +10 Карточка игрушки содержит необходимые данные + добавляется динамически из JS \n  3. +20 Добавление игрушек в избранное + вывод сообщения, если уже добавлено 20штук\n  4. +20 Сортировка игрушек, которые на данный момент на странице \n  5. +30 Фильтры в указанном диапазоне от и до\n  6. +30 Фильтры по значению. Выделенные фильтры выделяются стилем + можно отфильтровать игрушки по нескольким фильтрам одного типа (в данном случае работает как ИЛИ)\n  7. +20 Можно отфильтровать игрушки по нескольким фильтрам разного типа (в данном случае фильтры работают как И). Если нет совпадений, то выводится сообщение.\n  8. +20 Сброс фильтров\n  9. +10 Сохранение настроек в local storage\n  10. +30 Поиск\n\n  Дополнительный функционал в процессе.\n  ")})()})();